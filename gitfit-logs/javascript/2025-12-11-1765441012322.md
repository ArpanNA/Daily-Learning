# GitFit Daily Challenge: javascript

**Date:** 2025-12-11

## Question
Given the following JavaScript code snippet:

```javascript
for (var i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 100);
}
```

1.  Explain precisely *why* the output of this code snippet consists of five instances of the number `5`. Your explanation must reference the specific scoping and timing mechanisms at play.
2.  Provide two distinct, idiomatic ES6 solutions to modify the loop such that it correctly logs `0` through `4`, and justify why each solution successfully creates the necessary lexical environment separation.

## My Answer
✅ 1. Why does the original code print five 5s?
for (var i = 0; i < 5; i++) {
  setTimeout(() => console.log(i), 100);
}

Reason 1 — var is function-scoped, not block-scoped

var i inside the loop does not create a new binding of i for each iteration.
There is only one shared variable i, reused for all loop iterations.

Reason 2 — setTimeout callbacks run after the loop finishes

The loop executes very quickly:

Iteration	Immediately stored callback	Value of i at that moment
0 → 4	() => console.log(i)	0 → 4 (momentarily)

But no callback runs yet. All five callbacks reference the same variable i.

Reason 3 — By the time the callbacks execute, i is already 5

After the loop finishes, i becomes:

i === 5  // loop terminates


100 milliseconds later, all five callbacks run and each evaluates console.log(i).

Since all closures point to the same i, whose value is now 5,
the output becomes:

5
5
5
5
5


Closures do not copy values—they reference variables.
Because var provides only one shared binding, all closures print 5.

## AI Feedback
Your explanation for why the original code outputs five 5s is technically perfect, thoroughly addressing scoping, timing, and closure behavior. However, you neglected to provide the two distinct ES6 solutions required in Part 2 of the prompt. Pro-tip: `let` and using a function factory (or IIFE) are the two primary modern solutions to handle closure binding within loops.

> Verified by GitFit AI